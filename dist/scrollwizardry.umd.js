!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).ScrollWizardry={})}(this,function(t){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function e(){this.__data__=[],this.size=0}var r=function(t,e){return t===e||t!=t&&e!=e};var a=function(t,e){for(var i=t.length;i--;)if(r(t[i][0],e))return i;return-1},l=Array.prototype.splice;function i(t){var e=this.__data__,i=a(e,t);return!(i<0)&&(i==e.length-1?e.pop():l.call(e,i,1),--this.size,!0)}function c(t){var e=this.__data__,i=a(e,t);return i<0?void 0:e[i][1]}function h(t){return-1<a(this.__data__,t)}function u(t,e){var i=this.__data__,n=a(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}function d(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}d.prototype.clear=e,d.prototype.delete=i,d.prototype.get=c,d.prototype.has=h,d.prototype.set=u;var p=d;function f(){this.__data__=new p,this.size=0}function _(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function v(t){return this.__data__.get(t)}function g(t){return this.__data__.has(t)}var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(t,e){return t(e={exports:{}},e.exports),e.exports}var y="object"==typeof m&&m&&m.Object===Object&&m,w="object"==typeof self&&self&&self.Object===Object&&self,O=y||w||Function("return this")(),S=O.Symbol,E=Object.prototype,C=E.hasOwnProperty,x=E.toString,P=S?S.toStringTag:void 0;var k=function(t){var e=C.call(t,P),i=t[P];try{var n=!(t[P]=void 0)}catch(t){}var r=x.call(t);return n&&(e?t[P]=i:delete t[P]),r},T=Object.prototype.toString;var j=function(t){return T.call(t)},z=S?S.toStringTag:void 0;var R=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(z&&z in Object(t)?k:j)(t)};var I=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var A,G=function(t){if(!I(t))return!1;var e=R(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},D=O["__core-js_shared__"],L=(A=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"";var B=function(t){return!!L&&L in t},N=Function.prototype.toString;var F=function(t){if(null!=t){try{return N.call(t)}catch(t){}try{return t+""}catch(t){}}return""},U=/^\[object .+?Constructor\]$/,M=Function.prototype,H=Object.prototype,W=M.toString,$=H.hasOwnProperty,Z=RegExp("^"+W.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var V=function(t){return!(!I(t)||B(t))&&(G(t)?Z:U).test(F(t))};var Y=function(t,e){return null==t?void 0:t[e]};var q=function(t,e){var i=Y(t,e);return V(i)?i:void 0},X=q(O,"Map"),J=q(Object,"create");function K(){this.__data__=J?J(null):{},this.size=0}function Q(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var tt=Object.prototype.hasOwnProperty;function et(t){var e=this.__data__;if(J){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return tt.call(e,t)?e[t]:void 0}var it=Object.prototype.hasOwnProperty;function nt(t){var e=this.__data__;return J?void 0!==e[t]:it.call(e,t)}function rt(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=J&&void 0===e?"__lodash_hash_undefined__":e,this}function ot(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}ot.prototype.clear=K,ot.prototype.delete=Q,ot.prototype.get=et,ot.prototype.has=nt,ot.prototype.set=rt;var st=ot;var at=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var lt=function(t,e){var i=t.__data__;return at(e)?i["string"==typeof e?"string":"hash"]:i.map};function ct(t){var e=lt(this,t).delete(t);return this.size-=e?1:0,e}function ht(t){return lt(this,t).get(t)}function ut(t){return lt(this,t).has(t)}function dt(t,e){var i=lt(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this}function pt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}pt.prototype.clear=function(){this.size=0,this.__data__={hash:new st,map:new(X||p),string:new st}},pt.prototype.delete=ct,pt.prototype.get=ht,pt.prototype.has=ut,pt.prototype.set=dt;var ft=pt;function _t(t,e){var i=this.__data__;if(i instanceof p){var n=i.__data__;if(!X||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new ft(n)}return i.set(t,e),this.size=i.size,this}function vt(t){var e=this.__data__=new p(t);this.size=e.size}vt.prototype.clear=f,vt.prototype.delete=_,vt.prototype.get=v,vt.prototype.has=g,vt.prototype.set=_t;var gt=vt,mt=function(){try{var t=q(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var bt=function(t,e,i){"__proto__"==e&&mt?mt(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i};var yt=function(t,e,i){(void 0===i||r(t[e],i))&&(void 0!==i||e in t)||bt(t,e,i)};var wt=function(l){return function(t,e,i){for(var n=-1,r=Object(t),o=i(t),s=o.length;s--;){var a=o[l?s:++n];if(!1===e(r[a],a,r))break}return t}}(),Ot=b(function(t,e){var i=e&&!e.nodeType&&e,n=i&&t&&!t.nodeType&&t,r=n&&n.exports===i?O.Buffer:void 0,o=r?r.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var i=t.length,n=o?o(i):new t.constructor(i);return t.copy(n),n}}),St=O.Uint8Array;var Et=function(t){var e=new t.constructor(t.byteLength);return new St(e).set(new St(t)),e};var Ct=function(t,e){var i=e?Et(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)};var xt=function(t,e){var i=-1,n=t.length;for(e=e||Array(n);++i<n;)e[i]=t[i];return e},Pt=Object.create;function kt(){}var Tt=function(t){if(!I(t))return{};if(Pt)return Pt(t);kt.prototype=t;var e=new kt;return kt.prototype=void 0,e};var jt=function(e,i){return function(t){return e(i(t))}},zt=jt(Object.getPrototypeOf,Object),Rt=Object.prototype;var It=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rt)};var At=function(t){return"function"!=typeof t.constructor||It(t)?{}:Tt(zt(t))};var Gt=function(t){return null!=t&&"object"==typeof t};var Dt=function(t){return Gt(t)&&"[object Arguments]"==R(t)},Lt=Object.prototype,Bt=Lt.hasOwnProperty,Nt=Lt.propertyIsEnumerable,Ft=Dt(function(){return arguments}())?Dt:function(t){return Gt(t)&&Bt.call(t,"callee")&&!Nt.call(t,"callee")},Ut=Array.isArray;var Mt=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991};var Ht=function(t){return null!=t&&Mt(t.length)&&!G(t)};var Wt=function(t){return Gt(t)&&Ht(t)};function $t(){return!1}var Zt=b(function(t,e){var i=e&&!e.nodeType&&e,n=i&&t&&!t.nodeType&&t,r=n&&n.exports===i?O.Buffer:void 0,o=(r?r.isBuffer:void 0)||$t;t.exports=o}),Vt=Function.prototype,Yt=Object.prototype,qt=Vt.toString,Xt=Yt.hasOwnProperty,Jt=qt.call(Object);var Kt=function(t){if(!Gt(t)||"[object Object]"!=R(t))return!1;var e=zt(t);if(null===e)return!0;var i=Xt.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&qt.call(i)==Jt},Qt={};Qt["[object Float32Array]"]=Qt["[object Float64Array]"]=Qt["[object Int8Array]"]=Qt["[object Int16Array]"]=Qt["[object Int32Array]"]=Qt["[object Uint8Array]"]=Qt["[object Uint8ClampedArray]"]=Qt["[object Uint16Array]"]=Qt["[object Uint32Array]"]=!0,Qt["[object Arguments]"]=Qt["[object Array]"]=Qt["[object ArrayBuffer]"]=Qt["[object Boolean]"]=Qt["[object DataView]"]=Qt["[object Date]"]=Qt["[object Error]"]=Qt["[object Function]"]=Qt["[object Map]"]=Qt["[object Number]"]=Qt["[object Object]"]=Qt["[object RegExp]"]=Qt["[object Set]"]=Qt["[object String]"]=Qt["[object WeakMap]"]=!1;function te(t){return Gt(t)&&Mt(t.length)&&!!Qt[R(t)]}var ee=function(e){return function(t){return e(t)}},ie=b(function(t,e){var i=e&&!e.nodeType&&e,n=i&&t&&!t.nodeType&&t,r=n&&n.exports===i&&y.process,o=function(){try{var t=n&&n.require&&n.require("util").types;return t?t:r&&r.binding&&r.binding("util")}catch(t){}}();t.exports=o}),ne=ie&&ie.isTypedArray,re=ne?ee(ne):te;var oe=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},se=Object.prototype.hasOwnProperty;var ae=function(t,e,i){var n=t[e];se.call(t,e)&&r(n,i)&&(void 0!==i||e in t)||bt(t,e,i)};var le=function(t,e,i,n){var r=!i;i=i||{};for(var o=-1,s=e.length;++o<s;){var a=e[o],l=n?n(i[a],t[a],a,i,t):void 0;void 0===l&&(l=t[a]),(r?bt:ae)(i,a,l)}return i};var ce=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n},he=/^(?:0|[1-9]\d*)$/;var ue=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&he.test(t))&&-1<t&&t%1==0&&t<e},de=Object.prototype.hasOwnProperty;var pe=function(t,e){var i=Ut(t),n=!i&&Ft(t),r=!i&&!n&&Zt(t),o=!i&&!n&&!r&&re(t),s=i||n||r||o,a=s?ce(t.length,String):[],l=a.length;for(var c in t)!e&&!de.call(t,c)||s&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ue(c,l))||a.push(c);return a};var fe=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e},_e=Object.prototype.hasOwnProperty;var ve=function(t){if(!I(t))return fe(t);var e=It(t),i=[];for(var n in t)("constructor"!=n||!e&&_e.call(t,n))&&i.push(n);return i};var ge=function(t){return Ht(t)?pe(t,!0):ve(t)};var me=function(t){return le(t,ge(t))};var be=function(t,e,i,n,r,o,s){var a=oe(t,i),l=oe(e,i),c=s.get(l);if(c)yt(t,i,c);else{var h=o?o(a,l,i+"",t,e,s):void 0,u=void 0===h;if(u){var d=Ut(l),p=!d&&Zt(l),f=!d&&!p&&re(l);h=l,d||p||f?h=Ut(a)?a:Wt(a)?xt(a):p?Ot(l,!(u=!1)):f?Ct(l,!(u=!1)):[]:Kt(l)||Ft(l)?Ft(h=a)?h=me(a):I(a)&&!G(a)||(h=At(l)):u=!1}u&&(s.set(l,h),r(h,l,n,o,s),s.delete(l)),yt(t,i,h)}};var ye=function n(r,o,s,a,l){r!==o&&wt(o,function(t,e){if(l=l||new gt,I(t))be(r,o,e,s,n,a,l);else{var i=a?a(oe(r,e),t,e+"",r,o,l):void 0;void 0===i&&(i=t),yt(r,e,i)}},ge)};function we(t){return t}var Oe=function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)},Se=Math.max;var Ee=function(o,s,a){return s=Se(void 0===s?o.length-1:s,0),function(){for(var t=arguments,e=-1,i=Se(t.length-s,0),n=Array(i);++e<i;)n[e]=t[s+e];e=-1;for(var r=Array(s+1);++e<s;)r[e]=t[e];return r[s]=a(n),Oe(o,this,r)}};var Ce=function(t){return function(){return t}},xe=mt?function(t,e){return mt(t,"toString",{configurable:!0,enumerable:!1,value:Ce(e),writable:!0})}:we,Pe=Date.now;var ke=function(i){var n=0,r=0;return function(){var t=Pe(),e=16-(t-r);if(r=t,0<e){if(800<=++n)return arguments[0]}else n=0;return i.apply(void 0,arguments)}}(xe);var Te=function(t,e){return ke(Ee(t,e,we),t+"")};var je=function(t,e,i){if(!I(i))return!1;var n=typeof e;return!!("number"==n?Ht(i)&&ue(e,i.length):"string"==n&&e in i)&&r(i[e],t)};var ze=function(a){return Te(function(t,e){var i=-1,n=e.length,r=1<n?e[n-1]:void 0,o=2<n?e[2]:void 0;for(r=3<a.length&&"function"==typeof r?(n--,r):void 0,o&&je(e[0],e[1],o)&&(r=n<3?void 0:r,n=1),t=Object(t);++i<n;){var s=e[i];s&&a(t,s,i,r)}return t})}(function(t,e,i){ye(t,e,i)});var Re=function(t){return Gt(t)&&1===t.nodeType&&!Kt(t)};var Ie=function(t){return"number"==typeof t||Gt(t)&&"[object Number]"==R(t)};var Ae=function(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r};var Ge=function(t){return"symbol"==typeof t||Gt(t)&&"[object Symbol]"==R(t)},De=1/0,Le=S?S.prototype:void 0,Be=Le?Le.toString:void 0;var Ne=function t(e){if("string"==typeof e)return e;if(Ut(e))return Ae(e,t)+"";if(Ge(e))return Be?Be.call(e):"";var i=e+"";return"0"==i&&1/e==-De?"-0":i};var Fe=function(t){return null==t?"":Ne(t)};var Ue=function(t,e,i){var n=-1,r=t.length;e<0&&(e=r<-e?0:r+e),(i=r<i?r:i)<0&&(i+=r),r=i<e?0:i-e>>>0,e>>>=0;for(var o=Array(r);++n<r;)o[n]=t[n+e];return o};var Me=function(t,e,i){var n=t.length;return i=void 0===i?n:i,!e&&n<=i?t:Ue(t,e,i)},He=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var We=function(t){return He.test(t)};var $e=function(t){return t.split("")},Ze="\\ud800-\\udfff",Ve="["+Ze+"]",Ye="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",qe="\\ud83c[\\udffb-\\udfff]",Xe="[^"+Ze+"]",Je="(?:\\ud83c[\\udde6-\\uddff]){2}",Ke="[\\ud800-\\udbff][\\udc00-\\udfff]",Qe="(?:"+Ye+"|"+qe+")"+"?",ti="[\\ufe0e\\ufe0f]?",ei=ti+Qe+("(?:\\u200d(?:"+[Xe,Je,Ke].join("|")+")"+ti+Qe+")*"),ii="(?:"+[Xe+Ye+"?",Ye,Je,Ke,Ve].join("|")+")",ni=RegExp(qe+"(?="+qe+")|"+ii+ei,"g");var ri=function(t){return t.match(ni)||[]};var oi=function(t){return(We(t)?ri:$e)(t)};var si=function(r){return function(t){t=Fe(t);var e=We(t)?oi(t):void 0,i=e?e[0]:t.charAt(0),n=e?Me(e,1).join(""):t.slice(1);return i[r]()+n}}("toUpperCase");var ai=function(t){return si(Fe(t).toLowerCase())};var li=function(t,e,i,n){var r=-1,o=null==t?0:t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i};var ci=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),hi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ui=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var di=function(t){return(t=Fe(t))&&t.replace(hi,ci).replace(ui,"")},pi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var fi=function(t){return t.match(pi)||[]},_i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var vi=function(t){return _i.test(t)},gi="\\ud800-\\udfff",mi="\\u2700-\\u27bf",bi="a-z\\xdf-\\xf6\\xf8-\\xff",yi="A-Z\\xc0-\\xd6\\xd8-\\xde",wi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oi="["+wi+"]",Si="\\d+",Ei="["+mi+"]",Ci="["+bi+"]",xi="[^"+gi+wi+Si+mi+bi+yi+"]",Pi="(?:\\ud83c[\\udde6-\\uddff]){2}",ki="[\\ud800-\\udbff][\\udc00-\\udfff]",Ti="["+yi+"]",ji="(?:"+Ci+"|"+xi+")",zi="(?:"+Ti+"|"+xi+")",Ri="(?:['’](?:d|ll|m|re|s|t|ve))?",Ii="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ai="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Gi="[\\ufe0e\\ufe0f]?",Di=Gi+Ai+("(?:\\u200d(?:"+["[^"+gi+"]",Pi,ki].join("|")+")"+Gi+Ai+")*"),Li="(?:"+[Ei,Pi,ki].join("|")+")"+Di,Bi=RegExp([Ti+"?"+Ci+"+"+Ri+"(?="+[Oi,Ti,"$"].join("|")+")",zi+"+"+Ii+"(?="+[Oi,Ti+ji,"$"].join("|")+")",Ti+"?"+ji+"+"+Ri,Ti+"+"+Ii,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Si,Li].join("|"),"g");var Ni=function(t){return t.match(Bi)||[]};var Fi=function(t,e,i){return t=Fe(t),void 0===(e=i?void 0:e)?(vi(t)?Ni:fi)(t):t.match(e)||[]},Ui=RegExp("['’]","g");var Mi=function(e){return function(t){return li(Fi(di(t).replace(Ui,"")),e,"")}}(function(t,e,i){return e=e.toLowerCase(),t+(i?ai(e):e)});function Hi(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}var Wi=jt(Object.keys,Object),$i=Object.prototype.hasOwnProperty;var Zi=function(t){if(!It(t))return Wi(t);var e=[];for(var i in Object(t))$i.call(t,i)&&"constructor"!=i&&e.push(i);return e};function Vi(t){return(Ht(t)?pe:Zi)(t)}var Yi=function(o,s){return function(t,e){if(null==t)return t;if(!Ht(t))return o(t,e);for(var i=t.length,n=s?i:-1,r=Object(t);(s?n--:++n<i)&&!1!==e(r[n],n,r););return t}}(function(t,e){return t&&wt(t,e,Vi)});var qi=function(t){return"function"==typeof t?t:we};var Xi=function(t,e){return(Ut(t)?Hi:Yi)(t,qi(e))};var Ji=function(t){return"string"==typeof t||!Ut(t)&&Gt(t)&&"[object String]"==R(t)},Ki=function(){function r(){o(this,r)}return s(r,null,[{key:"elements",value:function(t){var e=0<arguments.length&&void 0!==t?t:[];return Ji(e)?document.querySelectorAll(e):Re(e)||e===document||e===window?[e]:e}},{key:"scrollTop",value:function(t){return(0<arguments.length&&void 0!==t?t:{}).scrollTop||window.pageYOffset||0}},{key:"scrollLeft",value:function(t){return(0<arguments.length&&void 0!==t?t:{}).scrollLeft||window.pageXOffset||0}},{key:"width",value:function(t){return t===window?window.innerWidth:t.getBoundingClientRect().width}},{key:"height",value:function(t){return t===window?window.innerHeight:t.getBoundingClientRect().height}},{key:"offset",value:function(t,e){var i={top:0,left:0};if(t&&t.getBoundingClientRect){var n=t.getBoundingClientRect();i.top=n.top,i.left=n.left,e||(i.top+=r.scrollTop(),i.left+=r.scrollLeft())}return i}},{key:"marginCollapse",value:function(t){return["block","flex","list-item","table","-webkit-box"].includes(t)}},{key:"css",value:function(i,t){return t?(Xi(t,function(t,e){t===parseFloat(t)&&(t+="px"),i.style[Mi(e)]=t}),t):i.currentStyle?i.currentStyle:window.getComputedStyle(i)}}]),r}(),Qi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tn=/^\w*$/;var en=function(t,e){if(Ut(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!Ge(t))||(tn.test(t)||!Qi.test(t)||null!=e&&t in Object(e))},nn="Expected a function";function rn(r,o){if("function"!=typeof r||null!=o&&"function"!=typeof o)throw new TypeError(nn);var s=function(){var t=arguments,e=o?o.apply(this,t):t[0],i=s.cache;if(i.has(e))return i.get(e);var n=r.apply(this,t);return s.cache=i.set(e,n)||i,n};return s.cache=new(rn.Cache||ft),s}rn.Cache=ft;var on=rn;var sn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,an=/\\(\\)?/g,ln=function(t){var e=on(t,function(t){return 500===i.size&&i.clear(),t}),i=e.cache;return e}(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(sn,function(t,e,i,n){r.push(i?n.replace(an,"$1"):e||t)}),r});var cn=function(t,e){return Ut(t)?t:en(t,e)?[t]:ln(Fe(t))};var hn=function(t){if("string"==typeof t||Ge(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var un=function(t,e){for(var i=0,n=(e=cn(e,t)).length;null!=t&&i<n;)t=t[hn(e[i++])];return i&&i==n?t:void 0};var dn=function(t,e,i,n){if(!I(t))return t;for(var r=-1,o=(e=cn(e,t)).length,s=o-1,a=t;null!=a&&++r<o;){var l=hn(e[r]),c=i;if(r!=s){var h=a[l];void 0===(c=n?n(h,l,a):void 0)&&(c=I(h)?h:ue(e[r+1])?[]:{})}ae(a,l,c),a=a[l]}return t};var pn=function(t,e,i){for(var n=-1,r=e.length,o={};++n<r;){var s=e[n],a=un(t,s);i(a,s)&&dn(o,cn(s,t),a)}return o};function fn(t,e){return null!=t&&e in Object(t)}var _n=function(t,e,i){for(var n=-1,r=(e=cn(e,t)).length,o=!1;++n<r;){var s=hn(e[n]);if(!(o=null!=t&&i(t,s)))break;t=t[s]}return o||++n!=r?o:!!(r=null==t?0:t.length)&&Mt(r)&&ue(s,r)&&(Ut(t)||Ft(t))};var vn=function(t,e){return null!=t&&_n(t,e,fn)};var gn=function(i,t){return pn(i,t,function(t,e){return vn(i,e)})};var mn=function(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t},bn=S?S.isConcatSpreadable:void 0;var yn=function(t){return Ut(t)||Ft(t)||!!(bn&&t&&t[bn])};var wn=function t(e,i,n,r,o){var s=-1,a=e.length;for(n=n||yn,o=o||[];++s<a;){var l=e[s];0<i&&n(l)?1<i?t(l,i-1,n,r,o):mn(o,l):r||(o[o.length]=l)}return o};function On(t){return(null==t?0:t.length)?wn(t,1):[]}function Sn(t,e,i,n){var r=this;return o(this,Sn),n=n||{},Object.keys(n).forEach(function(t){r[t]=n[t]}),this.type=t,this.target=i,this.currentTarget=i,this.namespace=e||"",this.timeStamp=Date.now(),this.timestamp=this.timeStamp,this}var En=function(t){return ke(Ee(t,void 0,On),t+"")}(function(t,e){return null==t?{}:gn(t,e)}),Cn=function(){function t(){o(this,t)}return s(t,null,[{key:"log",value:function(){}}]),t}(),xn=function(t){var e=document.createElement("div");e.textContent="start",Ki.css(e,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:t,"border-color":t});var i=document.createElement("div");return Ki.css(i,{position:"absolute",overflow:"visible",width:0,height:0}),i.appendChild(e),i},Pn=function(t){var e=document.createElement("div");return e.textContent="end",Ki.css(e,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:t,"border-color":t}),e},kn=function(){var t=document.createElement("div");return Ki.css(t,{position:"absolute",overflow:"visible","white-space":"nowrap","pointer-events":"none","font-size":"0.85em"}),t.style.zIndex="9999",t},Tn=function(t){var e=document.createElement("div");e.textContent="trigger",Ki.css(e,{position:"relative"});var i=document.createElement("div");Ki.css(i,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:t,"border-color":t}),i.appendChild(e);var n=document.createElement("div");return Ki.css(n,{position:"fixed",overflow:"visible","white-space":"nowrap","pointer-events":"none","font-size":"0.85em"}),n.style.zIndex="9999",n.appendChild(i),n},jn=0,zn=function(){function i(t,e){o(this,i),(e=ze({},{name:"",indent:0,parent:void 0,colorStart:"green",colorEnd:"red",colorTrigger:"blue"},e)).name=e.name||jn,jn++,this._elemBounds=kn(),this._elemStart=xn(e.colorStart),this._elemEnd=Pn(e.colorEnd),this._boundsContainer=e.parent&&Ki.elements(e.parent)[0],this._elemStart.firstChild.textContent+=" ".concat(e.name),this._elemEnd.textContent+=" ".concat(e.name),this._elemBounds.appendChild(this._elemStart),this._elemBounds.appendChild(this._elemEnd),this._vertical=null,this._ctrl=null,this.options=e,this.bounds=this._elemBounds,this.triggerGroup=null,this.scene=t}return s(i,[{key:"add",value:function(){var t=this;this._ctrl=this.scene.controller(),this._vertical=this._ctrl.info("vertical");var e=this._ctrl.info("isDocument");this._boundsContainer||(this._boundsContainer=e?document.body:this._ctrl.info("container")),e||"static"!==Ki.css(this._boundsContainer).position||Ki.css(this._boundsContainer,{position:"relative"}),this.scene.on("change.plugin_addIndicators",this._handleTriggerParamsChange.bind(this)),this.scene.on("shift.plugin_addIndicators",this._handleBoundsParamsChange.bind(this)),this._updateTriggerGroup(),this._updateBounds(),setTimeout(function(){t._ctrl.updateBoundsPositions(t)},0),Cn.log(3,"added indicators")}},{key:"remove",value:function(){if(this.triggerGroup){if(this.scene.off("change.plugin_addIndicators",this._handleTriggerParamsChange),this.scene.off("shift.plugin_addIndicators",this._handleBoundsParamsChange),1<this.triggerGroup.members.length){var t=this.triggerGroup;t.members.splice(t.members.indexOf(this),1),this._ctrl.updateTriggerGroupLabel(t),this._ctrl.updateTriggerGroupPositions(t),this.triggerGroup=null}else this._removeTriggerGroup();this._removeBounds(),Cn.log(3,"removed indicators")}}},{key:"_handleBoundsParamsChange",value:function(){this._updateBounds()}},{key:"_handleTriggerParamsChange",value:function(t){"triggerHook"===t.what&&this._updateTriggerGroup()}},{key:"_addBounds",value:function(){var t=this._ctrl.info("vertical");Ki.css(this._elemStart.firstChild,{"border-bottom-width":t?1:0,"border-right-width":t?0:1,bottom:t?-1:this.options.indent,right:t?this.options.indent:-1,padding:t?"0 8px":"2px 4px"}),Ki.css(this._elemEnd,{"border-top-width":t?1:0,"border-left-width":t?0:1,top:t?"100%":"",right:t?this.options.indent:"",bottom:t?"":this.options.indent,left:t?"":"100%",padding:t?"0 8px":"2px 4px"}),this._boundsContainer.appendChild(this._elemBounds)}},{key:"_removeBounds",value:function(){this._elemBounds.parentNode.removeChild(this._elemBounds)}},{key:"_updateBounds",value:function(){this._elemBounds.parentNode!==this._boundsContainer&&this._addBounds();var t={};t[this._vertical?"top":"left"]=this.scene.triggerPosition(),t[this._vertical?"height":"width"]=this.scene.duration(),Ki.css(this._elemBounds,t),Ki.css(this._elemEnd,{display:0<this.scene.duration()?"":"none"})}},{key:"_addTriggerGroup",value:function(){var t=Tn(this.options.colorTrigger),e={};e[this._vertical?"right":"bottom"]=0,e[this._vertical?"border-top-width":"border-left-width"]=1,Ki.css(t.firstChild,e),Ki.css(t.firstChild.firstChild,{padding:this._vertical?"0 8px 3px 8px":"3px 4px"}),document.body.appendChild(t);var i={triggerHook:this.scene.triggerHook(),element:t,members:[this]};this._ctrl._indicators.groups.push(i),this.triggerGroup=i,this._ctrl.updateTriggerGroupLabel(i),this._ctrl.updateTriggerGroupPositions(i)}},{key:"_removeTriggerGroup",value:function(){this._ctrl._indicators.groups.splice(this._ctrl._indicators.groups.indexOf(this.triggerGroup),1),this.triggerGroup.element.parentNode.removeChild(this.triggerGroup.element),this.triggerGroup=null}},{key:"_updateTriggerGroup",value:function(){var t=this.scene.triggerHook();if(!(this.triggerGroup&&Math.abs(this.triggerGroup.triggerHook-t)<1e-4)){for(var e,i=this._ctrl._indicators.groups,n=i.length;n--;)if(e=i[n],Math.abs(e.triggerHook-t)<1e-4)return this.triggerGroup&&(1===this.triggerGroup.members.length?this._removeTriggerGroup():(this.triggerGroup.members.splice(this.triggerGroup.members.indexOf(this),1),this._ctrl.updateTriggerGroupLabel(this.triggerGroup),this._ctrl.updateTriggerGroupPositions(this.triggerGroup))),e.members.push(this),this.triggerGroup=e,void this._ctrl.updateTriggerGroupLabel(e);if(this.triggerGroup){if(1===this.triggerGroup.members.length)return this.triggerGroup.triggerHook=t,void this._ctrl.updateTriggerGroupPositions(this.triggerGroup);this.triggerGroup.members.splice(this.triggerGroup.members.indexOf(this),1),this._ctrl.updateTriggerGroupLabel(this.triggerGroup),this._ctrl.updateTriggerGroupPositions(this.triggerGroup),this.triggerGroup=null}this._addTriggerGroup()}}}]),i}(),Rn="data-scrollwizardry-pin-spacer",In="ScrollWizardry.Scene",An="BEFORE",Gn="DURING",Dn="AFTER",Ln=["duration","offset","triggerHook"],Bn={duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2,tweenChanges:!1},Nn=function(){function e(t){var i=this;o(this,e),this.options=ze({},Bn,t),this._state=An,this._progress=0,this._scrollOffset={start:0,end:0},this._triggerPos=0,this._durationUpdateMethod=null,this._controller=null,this._listeners={},this._pin=null,this._pinOptions=null,this._cssClasses=null,this._cssClassElems=[],this._tween=null,this._indicator=null,Object.keys(Bn).forEach(function(t){i._addSceneOption(t)}),this.validate={duration:function(e){var t=this;if(Ji(e)&&e.match(/^(\.|\d)*\d+(%|vh|vw)$/)){var i=parseFloat(e)/100,n=e.match(/^(\.|\d)*\d+(%|vh|vw)$/);e=function(){return("vh"===n[2]?window.innerHeight:"vw"===n[2]?window.innerWidth:t._controller?t._controller.info("size"):0)*i}}if(G(e)){this._durationUpdateMethod=e;try{e=parseFloat(this._durationUpdateMethod())}catch(t){e=-1}}if(e=parseFloat(e),!Ie(e)||e<0)throw this._durationUpdateMethod?(this._durationUpdateMethod=null,Error('Invalid return value of supplied function for option "duration": '.concat(e))):Error('Invalid value for option "duration": '.concat(e));return e},offset:function(t){if(G(t)&&(t=t()),t=parseFloat(t),!Ie(t))throw Error('Invalid value for option "offset": '.concat(t));return t},triggerElement:function(t){if(t=t||void 0){var e=Ji(t)?Ki.elements(t)[0]:t;if(void 0===e||!e.parentNode)throw Error('Element defined in option "triggerElement" was not found: '.concat(t));t=e}return t},triggerHook:function(t){var e={onCenter:.5,onEnter:1,onLeave:0};if(Ie(t))t=Math.max(0,Math.min(parseFloat(t),1));else{if(!(t in e))throw Error('Invalid value for option "triggerHook": '.concat(t));t=e[t]}return t},reverse:function(t){return!!t},loglevel:function(t){if(t=parseInt(t,10),!Ie(t)||t<0||3<t)throw Error('Invalid value for option "loglevel": '.concat(t));return t},tweenChanges:function(t){return!!t}},this._validateOption(),this.on("change.internal",function(t){"loglevel"!==t.what&&"tweenChanges"!==t.what&&("triggerElement"===t.what?i._updateTriggerElementPosition():"reverse"===t.what&&i.update())}),this.on("shift.internal",function(){i.update()}),this.on("shift.internal",function(t){var e="duration"===t.reason;(i._state===Dn&&e||i._state===Gn&&0===i.options.duration)&&i._updatePinState(),e&&i._updatePinDimensions()}),this.on("progress.internal",function(){i._updatePinState()}),this.on("add.internal",function(){i._updatePinDimensions()}),this.on("destroy.internal",function(t){i.removePin(t.reset)}),this.on("destroy.internal",function(t){i.removeClassToggle(t.reset)}),this.on("progress.plugin_gsap",function(){i._updateTweenProgress()}),this.on("destroy.plugin_gsap",function(t){i.removeTween(t.reset)})}return s(e,[{key:"on",value:function(t,r){var o=this;return G(r)?(t=t.trim().split(" ")).forEach(function(t){var e=t.split("."),i=e[0],n=e[1];"*"!==i&&(o._listeners[i]||(o._listeners[i]=[]),o._listeners[i].push({namespace:n||"",callback:r}))}):Cn.log(1,"ERROR when calling '.on()': Supplied callback for '".concat(t,"' is not a valid function!")),this}},{key:"off",value:function(t,o){var s=this;return t?(t=t.trim().split(" ")).forEach(function(t){var e=t.split("."),i=e[0],r=e[1]||"";("*"===i?Object.keys(s._listeners):[i]).forEach(function(t){for(var e=s._listeners[t]||[],i=e.length;i--;){var n=e[i];!n||r!==n.namespace&&"*"!==r||o&&o!==n.callback||e.splice(i,1)}e.length||delete s._listeners[t]})}):Cn.log(1,"ERROR: Invalid event name supplied."),this}},{key:"trigger",value:function(t,e){var i=this;if(t){var n=t.trim().split("."),r=n[0],o=n[1],s=this._listeners[r];Cn.log(3,"event fired:",r,e?"->":"",e||""),s&&s.forEach(function(t){o&&o!==t.namespace||t.callback.call(i,new Sn(r,t.namespace,i,e))})}else Cn.log(1,"ERROR: Invalid event name supplied.");return this}},{key:"addTo",value:function(t){return this._controller!==t&&(this._controller&&this._controller.removeScene(this),this._controller=t,this._validateOption(),this._updateDuration(!0),this._updateTriggerElementPosition(!0),this._updateScrollOffset(),this._controller.info("container").addEventListener("resize",this._onContainerResize.bind(this),{passive:!0}),t.addScene(this),this.trigger("add",{controller:this._controller}),Cn.log(3,"added ".concat(In," to controller")),this.update()),this}},{key:"remove",value:function(){if(this._controller){this._controller.info("container").removeEventListener("resize",this._onContainerResize.bind(this),{passive:!0});var t=this._controller;this._controller=null,t.removeScene(this),this.trigger("remove"),Cn.log(3,"removed ".concat(In," from controller"))}return this}},{key:"destroy",value:function(t){return this.trigger("destroy",{reset:t}),this.remove(),this.triggerElement(null),this.off("*.*"),Cn.log(3,"destroyed ".concat(In," (reset: ").concat(t?"true":"false",")")),null}},{key:"update",value:function(t){if(this._controller)if(this._updateScrollOffset(),t)if(this._controller.enabled()){var e,i=this._controller.info("scrollPos");e=0<this.options.duration?(i-this._scrollOffset.start)/(this._scrollOffset.end-this._scrollOffset.start):i>=this._scrollOffset.start?1:0,this.trigger("update",{startPos:this._scrollOffset.start,endPos:this._scrollOffset.end,scrollPos:i}),this.progress(e)}else this._pin&&this._state===Gn&&this._updatePinState(!0);else this._controller.updateScene(this,!1);return this}},{key:"refresh",value:function(){return this._updateDuration(),this._updateTriggerElementPosition(),this}},{key:"progress",value:function(t){var e=this;if(!arguments.length)return this._progress;var i=!1,n=this._state,r=this._controller?this._controller.info("scrollDirection"):"PAUSED",o=this.options.reverse||t>=this._progress;if(0===this.options.duration?(i=this._progress!==t,this._progress=t<1&&o?0:1,this._state=0===this._progress?An:Gn):t<0&&this._state!==An&&o?(this._progress=0,this._state=An,i=!0):0<=t&&t<1&&o?(this._progress=t,this._state=Gn,i=!0):1<=t&&this._state!==Dn?(this._progress=1,this._state=Dn,i=!0):this._state!==Gn||o||this._updatePinState(),i){var s={progress:this._progress,state:this._state,scrollDirection:r},a=this._state!==n,l=function(t){e.trigger(t,s)};a&&n!==Gn&&(l("enter"),l(n===An?"start":"end")),l("progress"),a&&this._state!==Gn&&(l(this._state===An?"start":"end"),l("leave"))}return this}},{key:"_updateScrollOffset",value:function(){var t=G(this.options.offset)?this.options.offset():this.options.offset;this._scrollOffset={start:this._triggerPos+t},this._controller&&this.options.triggerElement&&(this._scrollOffset.start-=this._controller.info("size")*this.options.triggerHook),this._scrollOffset.end=this._scrollOffset.start+this.options.duration}},{key:"_updateDuration",value:function(t){if(this._durationUpdateMethod){var e="duration";this._changeOption(e,this._durationUpdateMethod.call(this))&&!t&&(this.trigger("change",{what:e,newVal:this.options[e]}),this.trigger("shift",{reason:e}))}}},{key:"_updateTriggerElementPosition",value:function(t){var e=0,i=this.options.triggerElement;if(this._controller&&(i||0<this._triggerPos)){if(i)if(i.parentNode){for(var n=this._controller.info(),r=Ki.offset(n.container),o=n.vertical?"top":"left";i.parentNode.hasAttribute(Rn);)i=i.parentNode;var s=Ki.offset(i);n.isDocument||(r[o]-=this._controller.scrollPos()),e=s[o]-r[o]}else Cn.log(2,"WARNING: triggerElement was removed from DOM and will be reset to",void 0),this.triggerElement(void 0);var a=e!==this._triggerPos;this._triggerPos=e,a&&!t&&this.trigger("shift",{reason:"triggerElementPosition"})}}},{key:"_onContainerResize",value:function(){0<this.options.triggerHook&&this.trigger("shift",{reason:"containerResize"})}},{key:"_validateOption",value:function(){for(var r=this,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];(e=e.length?e:Object.keys(this.validate)).forEach(function(e){var i;if(r.validate[e])try{i=r.validate[e].call(r,r.options[e])}catch(t){i=Bn[e];var n=Ji(t)?[t]:t;Ut(n)?(n[0]="ERROR: ".concat(n[0]),n.unshift(1),Cn.log.apply(r,n)):Cn.log(1,"ERROR: Problem executing validation callback for option '".concat(e,"':"),t.message)}finally{r.options[e]=i}})}},{key:"_changeOption",value:function(t,e){var i=!1,n=this.options[t];return this.options[t]!==e&&(this.options[t]=e,this._validateOption(t),i=n!==this.options[t]),i}},{key:"_addSceneOption",value:function(t){var e=this;this[t]||(this[t]=function(){return 0===arguments.length?e.options[t]:("duration"===t&&(e._durationUpdateMethod=null),e._changeOption(t,arguments.length<=0?void 0:arguments[0])&&(e.trigger("change",{what:t,newVal:e.options[t]}),-1<Ln.indexOf(t)&&e.trigger("shift",{reason:t})),e)})}},{key:"controller",value:function(){return this._controller}},{key:"state",value:function(){return this._state}},{key:"scrollOffset",value:function(){return this._scrollOffset.start}},{key:"triggerPosition",value:function(){var t=G(this.options.offset)?this.options.offset():this.options.offset;return this._controller&&(this.options.triggerElement?t+=this._triggerPos:t+=this._controller.info("size")*this.triggerHook()),t}},{key:"_updatePinState",value:function(t){if(this._pin&&this._controller){var e=this._controller.info(),i=this._pinOptions.spacer.firstChild;if(t||this._state!==Gn){var n={position:this._pinOptions.inFlow?"relative":"absolute",top:0,left:0},r=Ki.css(i).position!==n.position;this._pinOptions.pushFollowers?0<this.options.duration&&(this._state===Dn&&0===parseFloat(Ki.css(this._pinOptions.spacer).paddingTop)||this._state===An&&0===parseFloat(Ki.css(this._pinOptions.spacer).paddingBottom))&&(r=!0):n[e.vertical?"top":"left"]=this.options.duration*this._progress,Ki.css(i,n),r&&this._updatePinDimensions()}else{"fixed"!==Ki.css(i).position&&(Ki.css(i,{position:"fixed"}),this._updatePinDimensions());var o=Ki.offset(this._pinOptions.spacer,!0),s=this.options.reverse||0===this.options.duration?e.scrollPos-this._scrollOffset.start:Math.round(this._progress*this.options.duration*10)/10;o[e.vertical?"top":"left"]+=s,Ki.css(this._pinOptions.spacer.firstChild,o)}}}},{key:"_updatePinDimensions",value:function(){if(this._pin&&this._controller&&this._pinOptions.inFlow){var t=this._state===Gn,e=this._controller.info("vertical"),i=this._pinOptions.spacer.firstChild,n=Ki.marginCollapse(Ki.css(this._pinOptions.spacer).display),r={};this._pinOptions.relSize.width||this._pinOptions.relSize.autoFullWidth?t?Ki.css(this._pin,{width:Ki.width(this._pinOptions.spacer)}):Ki.css(this._pin,{width:"100%"}):(r["min-width"]=Ki.width(e?this._pin:i,!0,!0),r.width=t?r["min-width"]:"auto"),this._pinOptions.relSize.height?t?Ki.css(this._pin,{height:Ki.height(this._pinOptions.spacer)-(this._pinOptions.pushFollowers?this.options.duration:0)}):Ki.css(this._pin,{height:"100%"}):(r["min-height"]=Ki.height(e?i:this._pin,!0,!n),r.height=t?r["min-height"]:"auto"),this._pinOptions.pushFollowers&&(r["padding".concat(e?"Top":"Left")]=this.options.duration*this._progress,r["padding".concat(e?"Bottom":"Right")]=this.options.duration*(1-this._progress)),Ki.css(this._pinOptions.spacer,r)}}},{key:"_updatePinInContainer",value:function(){this._controller&&this._pin&&this._state===Gn&&!this._controller.info("isDocument")&&this._updatePinState()}},{key:"_updateRelativePinSpacer",value:function(){this._controller&&this._pin&&this._state===Gn&&((this._pinOptions.relSize.width||this._pinOptions.relSize.autoFullWidth)&&Ki.width(window)!==Ki.width(this._pinOptions.spacer.parentNode)||this._pinOptions.relSize.height&&Ki.height(window)!==Ki.height(this._pinOptions.spacer.parentNode))&&this._updatePinDimensions()}},{key:"_onMousewheelOverPin",value:function(t){this._controller&&this._pin&&this._state===Gn&&!this._controller.info("isDocument")&&(t.preventDefault(),this._controller._setScrollPos(this._controller.info("scrollPos")-((t.wheelDelta||t[this._controller.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-t.detail)))}},{key:"setPin",value:function(t,e){var i=this;if(e=ze({},{pushFollowers:!0,spacerClass:"scrollwizardry-pin-spacer"},e),!(t=Ki.elements(t)[0]))return Cn.log(1,"ERROR calling method 'setPin()': Invalid pin element supplied"),this;if("fixed"===Ki.css(t).position)return Cn.log(1,"ERROR calling method 'setPin()': Pin does not work with elements that are positioned 'fixed'"),this;if(this._pin){if(this._pin===t)return this;this.removePin()}this._pin=t;var n=Ki.css(this._pin.parentNode).display,r=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];this._pin.parentNode.style.display="none";var o="absolute"!==Ki.css(this._pin).position,s=En(Ki.css(this._pin),r.concat(["display"])),a=En(Ki.css(this._pin),["width","height"]);this._pin.parentNode.style.display=n,!o&&e.pushFollowers&&(Cn.log(2,"WARNING: If the pinned element is positioned absolutely pushFollowers will be disabled."),e.pushFollowers=!1),window.setTimeout(function(){i._pin&&0===i.options.duration&&e.pushFollowers&&Cn.log(2,"WARNING: pushFollowers =",!0,"has no effect, when scene duration is 0.")},0);var l=this._pin.parentNode.insertBefore(document.createElement("div"),this._pin),c=ze(s,{position:o?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(o||ze(c,a),Ki.css(l,c),l.setAttribute(Rn,""),l.classList.add(e.spacerClass),this._pinOptions={spacer:l,relSize:{width:"%"===a.width.slice(-1),height:"%"===a.height.slice(-1),autoFullWidth:"auto"===a.width&&o&&Ki.marginCollapse(s.display)},pushFollowers:e.pushFollowers,inFlow:o},!this._pin.___origStyle){this._pin.___origStyle={};var h=this._pin.style;r.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]).forEach(function(t){i._pin.___origStyle[t]=h[t]||""})}return this._pinOptions.relSize.width&&Ki.css(l,{width:a.width}),this._pinOptions.relSize.height&&Ki.css(l,{height:a.height}),l.appendChild(this._pin),Ki.css(this._pin,{position:o?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(this._pinOptions.relSize.width||this._pinOptions.relSize.autoFullWidth)&&Ki.css(this._pin,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",this._updatePinInContainer.bind(this),{passive:!0}),window.addEventListener("resize",this._updatePinInContainer.bind(this),{passive:!0}),window.addEventListener("resize",this._updateRelativePinSpacer.bind(this),{passive:!0}),this._pin.addEventListener("mousewheel",this._onMousewheelOverPin.bind(this)),this._pin.addEventListener("DOMMouseScroll",this._onMousewheelOverPin.bind(this)),Cn.log(3,"added pin"),this._updatePinState(),this}},{key:"removePin",value:function(t){if(this._pin){if(this._state===Gn&&this._updatePinState(!0),t||!this._controller){var e=this._pinOptions.spacer.firstChild;if(e.hasAttribute(Rn)){var i=this._pinOptions.spacer.style,n={};["margin","marginLeft","marginRight","marginTop","marginBottom"].forEach(function(t){n[t]=i[t]||""}),Ki.css(e,n)}this._pinOptions.spacer.parentNode.insertBefore(e,this._pinOptions.spacer),this._pinOptions.spacer.parentNode.removeChild(this._pinOptions.spacer),this._pin.parentNode.hasAttribute(Rn)||(Ki.css(this._pin,this._pin.___origStyle),delete this._pin.___origStyle)}window.removeEventListener("scroll",this._updatePinInContainer.bind(this),{passive:!0}),window.removeEventListener("resize",this._updatePinInContainer.bind(this),{passive:!0}),window.removeEventListener("resize",this._updateRelativePinSpacer.bind(this),{passive:!0}),this._pin.removeEventListener("mousewheel",this._onMousewheelOverPin.bind(this)),this._pin.removeEventListener("DOMMouseScroll",this._onMousewheelOverPin.bind(this)),this._pin=null,this._pinOptions.spacer=null,Cn.log(3,"removed pin (reset: ".concat(t?"true":"false",")"))}return this}},{key:"setClassToggle",value:function(t,e){var i=this,n=Ki.elements(t);return 0!==n.length&&Ji(e)?(0<this._cssClassElems.length&&this.removeClassToggle(),this._cssClasses=e,this._cssClassElems=n,this.on("enter.internal_class leave.internal_class",function(e){i._cssClassElems.forEach(function(t){t.classList["enter"===e.type?"add":"remove"](i._cssClasses)})})):Cn.log(1,"ERROR calling method 'setClassToggle()': Invalid ".concat(0===n.length?"element":"classes"," supplied.")),this}},{key:"removeClassToggle",value:function(t){var e=this;return t&&this._cssClassElems.forEach(function(t){t.classList.remove(e._cssClasses)}),this.off("start.internal_class end.internal_class"),this._cssClasses=null,this._cssClassElems=[],this}},{key:"_updateTweenProgress",value:function(){if(this._tween){var t=this.progress(),e=this.state();this._tween.repeat&&-1===this._tween.repeat()?"DURING"===e&&this._tween.paused()?this._tween.play():"DURING"===e||this._tween.paused()||this._tween.pause():t!==this._tween.progress()&&(0===this.duration()?0<t?this._tween.play():this._tween.reverse():this.tweenChanges()&&this._tween.tweenTo?this._tween.tweenTo(t*this._tween.duration()):this._tween.progress(t).pause())}}},{key:"setTween",value:function(t,e,i){var n;1<arguments.length&&(arguments.length<3&&(i=e,e=1),t=window.TweenMax.to(t,e,i));try{(n=window.TimelineMax?new window.TimelineMax({smoothChildTiming:!0}).add(t):t).pause()}catch(t){return Cn.log(1,"ERROR calling method 'setTween()': Supplied argument is not a valid TweenObject"),this}return this._tween&&this.removeTween(),this._tween=n,t.repeat&&-1===t.repeat()&&(this._tween.repeat(-1),this._tween.yoyo(t.yoyo())),Cn.log(3,"added tween"),this._updateTweenProgress(),this}},{key:"removeTween",value:function(t){return this._tween&&(t&&this._tween.progress(0).pause(),this._tween.kill(),this._tween=null,Cn.log(3,"removed tween (reset: ".concat(t?"true":"false",")"))),this}},{key:"addIndicators",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};return this._indicator||(this._indicator=new zn(this,e),this.on("add.plugin_addIndicators",this._indicator.add.bind(this._indicator)),this.on("remove.plugin_addIndicators",this._indicator.remove.bind(this._indicator)),this.on("destroy.plugin_addIndicators",this.removeIndicators.bind(this)),this.controller()&&this._indicator.add()),this}},{key:"removeIndicators",value:function(){return this._indicator&&(this._indicator.remove(),this.off("*.plugin_addIndicators"),this._indicator=null),this}}]),e}(),Fn="ScrollWizardry.Controller",Un="REVERSE",Mn=function(){function n(t){o(this,n);var e={container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100,addIndicators:!1};if(this.options=ze({},e,t),this.options.container=Ki.elements(this.options.container)[0],!this.options.container)throw Cn.log(1,"ERROR creating object ".concat(Fn,": No valid scroll container supplied")),Error("".concat(Fn," init failed"));this._isDocument=this.options.container===window||this.options.container===document.body||!document.body.contains(this.options.container),this._sceneObjects=[],this._updateScenesOnNextCycle=!1,this._scrollPos=0,this._scrollDirection="PAUSED",this._viewportSize=0,this._enabled=!0,this._updateTimeout=null,this._refreshTimeout=null,this._isDocument&&(this.options.container=window),this._viewportSize=this._getViewportSize(),this.options.container.addEventListener("resize",this._onChange.bind(this),{passive:!0}),this.options.container.addEventListener("scroll",this._onChange.bind(this),{passive:!0});var i=parseInt(this.options.refreshInterval,10);this.options.refreshInterval=Ie(i)?i:e.refreshInterval,this._scheduleRefresh(),this._info=this.info(),this._container=this._info.container,this._isDocument=this._info.isDocument,this._vertical=this._info.vertical,this._indicators={groups:[]},this.options.addIndicators&&(this._container.addEventListener("resize",this._handleTriggerPositionChange.bind(this),{passive:!0}),this._isDocument||(window.addEventListener("resize",this._handleTriggerPositionChange.bind(this),{passive:!0}),window.addEventListener("scroll",this._handleTriggerPositionChange.bind(this),{passive:!0})),this._container.addEventListener("resize",this._handleBoundsPositionChange.bind(this),{passive:!0}),this._container.addEventListener("scroll",this._handleBoundsPositionChange.bind(this),{passive:!0})),Cn.log(3,"added new ".concat(Fn))}return s(n,[{key:"_scheduleRefresh",value:function(){0<this.options.refreshInterval&&this._sceneObjects.length?this._refreshTimeout=window.setTimeout(this._refresh.bind(this),this.options.refreshInterval):this._refreshTimeout=null}},{key:"_getScrollPos",value:function(){return this.options.vertical?Ki.scrollTop(this.options.container):Ki.scrollLeft(this.options.container)}},{key:"_getViewportSize",value:function(){return this.options.vertical?Ki.height(this.options.container):Ki.width(this.options.container)}},{key:"_setScrollPos",value:function(t){this.options.vertical?this._isDocument?window.scrollTo(Ki.scrollLeft(),t):this.options.container.scrollTop=t:this._isDocument?window.scrollTo(t,Ki.scrollTop()):this.options.container.scrollLeft=t}},{key:"_updateScenes",value:function(){var i=this;if(this._enabled&&this._updateScenesOnNextCycle){var n=Ut(this._updateScenesOnNextCycle)?this._updateScenesOnNextCycle:this._sceneObjects.slice(0);this._updateScenesOnNextCycle=!1;var t=this._scrollPos;this._scrollPos=this.scrollPos();var e=this._scrollPos-t;0!=e&&(this._scrollDirection=0<e?"FORWARD":Un),this._scrollDirection===Un&&n.reverse(),n.forEach(function(t,e){Cn.log(3,"updating scene ".concat(e+1,"/").concat(n.length," (").concat(i._sceneObjects.length," total)")),t.update(!0)}),0===n.length&&3<=this.options.loglevel&&Cn.log(3,"updating 0 scenes (nothing added to controller)")}}},{key:"_debounceUpdate",value:function(){this._sceneObjects.length?this._updateTimeout=window.requestAnimationFrame(this._updateScenes.bind(this)):this._updateTimeout=null}},{key:"_onChange",value:function(t){Cn.log(3,"event fired causing an update:",t.type),"resize"===t.type&&(this._viewportSize=this._getViewportSize(),this._scrollDirection="PAUSED"),this._refreshTimeout||this._scheduleRefresh(),!0!==this._updateScenesOnNextCycle&&(this._updateScenesOnNextCycle=!0,this._debounceUpdate())}},{key:"_refresh",value:function(){if(!this._isDocument&&this._viewportSize!==this._getViewportSize()){var e;try{e=new Event("resize",{bubbles:!1,cancelable:!1})}catch(t){(e=document.createEvent("Event")).initEvent("resize",!1,!1)}this.options.container.dispatchEvent(e)}this._sceneObjects.forEach(function(t){t.refresh()}),this._scheduleRefresh()}},{key:"_sortScenes",value:function(t){if(t.length<=1)return t;var e=t.slice(0);return e.sort(function(t,e){return t.scrollOffset()>e.scrollOffset()?1:-1}),e}},{key:"addScene",value:function(e){var i=this;return Ut(e)?e.forEach(function(t){i.addScene(t)}):e.controller()!==this?e.addTo(this):this._sceneObjects.includes(e)||(this._sceneObjects.push(e),this._sceneObjects=this._sortScenes(this._sceneObjects),e.on("shift.controller_sort",function(){i._sceneObjects=i._sortScenes(i._sceneObjects)}),Object.keys(this.options.globalSceneOptions).forEach(function(t){e[t]&&e[t].call(e,i.options.globalSceneOptions[t])}),Cn.log(3,"adding Scene (now ".concat(this._sceneObjects.length," total)"))),this.options.addIndicators&&e instanceof Nn&&e.controller()===this&&e.addIndicators(),this._debounceUpdate(),this}},{key:"removeScene",value:function(t){var e=this;if(Ut(t))t.forEach(function(t){e.removeScene(t)});else{var i=this._sceneObjects.indexOf(t);-1<i&&(t.off("shift.controller_sort"),this._sceneObjects.splice(i,1),Cn.log(3,"removing Scene (now ".concat(this._sceneObjects.length," left)")),t.remove())}return this}},{key:"updateScene",value:function(t,e){var i=this;return Ut(t)?t.forEach(function(t){i.updateScene(t,e)}):e?t.update(!0):!0!==this._updateScenesOnNextCycle&&(this._updateScenesOnNextCycle=this._updateScenesOnNextCycle||[],-1===this._updateScenesOnNextCycle.indexOf(t)&&this._updateScenesOnNextCycle.push(t),this._updateScenesOnNextCycle=this._sortScenes(this._updateScenesOnNextCycle),this._debounceUpdate()),this}},{key:"update",value:function(t){return this._onChange({type:"resize"}),t&&this._updateScenes(),this}},{key:"scrollTo",value:function(t,e){if(Ie(t))this._setScrollPos.call(this.options.container,t,e);else if(G(t))this._setScrollPos=t;else if(Re(t)){for(;t.parentNode.hasAttribute("data-scrollwizardry-pin-spacer");)t=t.parentNode;var i=this.options.vertical?"top":"left",n=Ki.offset(this.options.container),r=Ki.offset(t);this._isDocument||(n[i]-=this.scrollPos()),this.scrollTo(r[i]-n[i],e)}else t instanceof Nn&&(t.controller()===this?this.scrollTo(t.scrollOffset(),e):Cn.log(2,"scrollTo(): The supplied scene does not belong to this controller, scroll cancelled",t));return this}},{key:"scrollPos",value:function(t){return arguments.length?(G(t)?this._getScrollPos=t:Cn.log(2,"Provided value for method 'scrollPos()' is not a function, to change the current scroll position use 'scrollTo()'"),this):this._getScrollPos.call(this)}},{key:"info",value:function(t){var e={size:this._viewportSize,vertical:this.options.vertical,scrollPos:this._scrollPos,scrollDirection:this._scrollDirection,container:this.options.container,isDocument:this._isDocument};return void 0!==e[t]?e[t]:e}},{key:"loglevel",value:function(t){return arguments.length?(this.options.loglevel!==t&&(this.options.loglevel=t),this):this.options.loglevel}},{key:"enabled",value:function(t){return arguments.length?(this._enabled!==t&&(this._enabled=!!t,this.updateScene(this._sceneObjects,!0)),this):this._enabled}},{key:"destroy",value:function(e){return window.clearTimeout(this._refreshTimeout),this._sceneObjects.map(function(t){return t}).forEach(function(t){return t.destroy(e)}),this.options.container.removeEventListener("resize",this._onChange.bind(this),{passive:!0}),this.options.container.removeEventListener("scroll",this._onChange.bind(this),{passive:!0}),window.cancelAnimationFrame(this._updateTimeout),Cn.log(3,"destroyed ".concat(Fn," (reset: ").concat(e?"true":"false",")")),this.options.addIndicators&&(this._container.removeEventListener("resize",this._handleTriggerPositionChange.bind(this),{passive:!0}),this._isDocument||(window.removeEventListener("resize",this._handleTriggerPositionChange.bind(this),{passive:!0}),window.removeEventListener("scroll",this._handleTriggerPositionChange.bind(this),{passive:!0})),this._container.removeEventListener("resize",this._handleBoundsPositionChange.bind(this),{passive:!0}),this._container.removeEventListener("scroll",this._handleBoundsPositionChange.bind(this),{passive:!0})),null}},{key:"_handleBoundsPositionChange",value:function(){this.updateBoundsPositions()}},{key:"_handleTriggerPositionChange",value:function(){this.updateTriggerGroupPositions(),this._sceneObjects.forEach(function(t){t._indicator&&t._indicator._updateBounds()})}},{key:"updateBoundsPositions",value:function(t){for(var e,i,n,r=t?[ze({},t.triggerGroup,{members:[t]})]:this._indicators.groups,o=r.length,s=this._vertical?"left":"top",a=this._vertical?"width":"height",l=this._vertical?Ki.scrollLeft(this._container)+(Ki.width(this._container)-15):Ki.scrollTop(this._container)+(Ki.height(this._container)-15);o--;)for(e=(n=r[o]).members.length,i=Ki[a](n.element.firstChild);e--;){var c={};c[s]=l-i,Ki.css(n.members[e].bounds,c)}}},{key:"updateTriggerGroupPositions",value:function(t){for(var e,i,n,r,o=t?[t]:this._indicators.groups,s=o.length,a=this._isDocument?document.body:this._container,l=this._isDocument?{top:0,left:0}:Ki.offset(a,!0),c=this._vertical?Ki.width(this._container)-15:Ki.height(this._container)-15,h=this._vertical?"width":"height",u=this._vertical?"Y":"X";s--;)i=(e=o[s]).element,n=e.triggerHook*this.info("size"),r=Ki[h](i.firstChild.firstChild)<n?"translate".concat(u,"(-100%)"):"",Ki.css(i,{top:l.top+(this._vertical?n:c-e.members[0].options.indent),left:l.left+(this._vertical?c-e.members[0].options.indent:n)}),Ki.css(i.firstChild.firstChild,{transform:r})}},{key:"updateTriggerGroupLabel",value:function(t){var e="trigger".concat(1<t.members.length?"":" ".concat(t.members[0].options.name)),i=t.element.firstChild.firstChild;i.textContent!==e&&(i.textContent=e,this._vertical&&this.updateBoundsPositions())}}]),n}();t.Controller=Mn,t.Scene=Nn,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=scrollwizardry.umd.js.map
